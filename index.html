<html>
<head>
<link rel='stylesheet' type='text/css' href='css/style.css'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src='js/d3.v4.min.js'></script>
<script src='js/dimple.v2.3.0.min.js'></script>
<script src="js/scripts.js"></script>


</head>

<body>

  <script type='text/javascript'>
  //2013-09-14 18:38:39.097000000
  console.time("TotalTime:");
  //d3.csv('data/smallparsedData.csv', draw);
  //d3.csv('data/smallparsedData.csv', function(d){
  d3.csv('data/medParsedData.csv', function(d){
    //debugger;
    dfor = d3.timeFormat('%Y-%m');
    mopar = d3.timeParse('%m')
    for (i=0; i<d.length; i++){
      
      //add conditional for inconsisttant  date and time format in data
      (d[i]['ListingCreationDate'].length > 19) ? dpar = d3.timeParse('%Y-%m-%d %H:%M:%S.%L%L%L') : dpar = d3.timeParse('%Y-%m-%d %H:%M:%S');
      
    
      // Create the quarter data  by rounding up to next int for devisor
      // The date constructor's Month is zero indexed so  subtract 1 from it
      d[i]['LoanQuarter'] = new Date(dpar(d[i]['ListingCreationDate']).getFullYear(), (Math.ceil(dpar(d[i]['ListingCreationDate']).getMonth()/3))-1, 1);

      d[i]['LoanYear'] = new Date(dpar(d[i]['ListingCreationDate']).getFullYear(), 0, 1); 
      //console.log(d[i]['LoanQuarter'] )
      //cast date back to string from date function with new format
      d[i]['ListingCreationDate'] = dfor(dpar(d[i]['ListingCreationDate'])) ;
    
      
      function returnFiscalQuarter(loanDate){

        var i = d3.timeMonth.filter(function(d) { return (d.getDate() - 1) % 3 === 0; });
      }

    }
    
    console.log(d.columns);
    //debugger;
    
    draw(d);
  });
  console.timeEnd("TotalTime:");


  </script>
  

  <div id='headerContainer'>
  </div>

  <div id='chartContainer'>
    <colgroup>
      <col id='chartArea'> chart</col>
      <col> blowout </col>
    </colgroup>
  </div>

</body>
</html>
